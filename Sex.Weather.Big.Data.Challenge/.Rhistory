repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)=typeof(US.Cities)){
break
}
}
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)=typeof(US.Cities)){break}
}
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)=typeof(US.Cities)){break}
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id) = typeof(US.Cities)){break}
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id) == typeof(US.Cities)){break}
for(i in 1:2){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:2){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
]
for(i in 1:nrow(US.Cities)){
tryCatch({
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
#find city station
station.id <- paste(station$usaf[1],station$wban[1],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)}, error=function(e){
})
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weather, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
#That worked, kinda... it output a full list of files, but duplicated datasets
#but gave them new names if the station was not available
#Time to try to tweak it again
#----Attempt 3------------------------------------------------------------------
for(i in 1:2){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
or(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
library("rnoaa")
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
wd <- getwd()
# working directory
wd <- getwd()
# names of folders for output data (figures,data output,data)
# store names of the folders in an object
output.folder.names <- c("figures", "data.output")
# and make the folders if they don't exit yet. No need to understand this now
for(i in 1:length(output.folder.names))
if(file.exists(output.folder.names[i]) == FALSE)
dir.create(output.folder.names[i])
#path to data folder
path.data <- paste(wd,"/",output.folder.names[2],"/", sep = "")
<<<<<<< HEAD
#Example of posting to the datafolder
write.csv(output.folder.names, paste(path.data, "uselessnames.csv"),
row.names = FALSE)
library("rnoaa")
#Import needed dataset
US.Cities <- read.csv("cities.csv", na.strings = "")
# First try using repeat loop
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
# First try using repeat loop
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
if(typeof(station.id)==typeof(US.Cities)){
break
}
}
#collect data from station
station.weather <- lcd(station.id, year=2017)
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
# First try using repeat loop
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
if(typeof(station.weather)==typeof(US.Cities)){
break
}
}
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
#----Attempt 3------------------------------------------------------------------
is.error(lcd(station.id, year=2017))
#----Attempt 3------------------------------------------------------------------
has_error(lcd(station.id, year=2017))
install.packages("errors")
library(errors)
detach("package:errors", unload = TRUE)
install.packages("jmvcore")
library(jmvcore)
#----Attempt 3------------------------------------------------------------------
isError(tation.weather)
#----Attempt 3------------------------------------------------------------------
isError(station.weather)
#----Attempt 3------------------------------------------------------------------
isError(lcd(station.id, year=2017))
