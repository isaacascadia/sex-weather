#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
if(typeof(lcd(station.id, year=2017)==typeof(US.Cities)){
break
}
}
}
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
if(typeof(lcd(station.id, year=2017)==typeof(US.Cities)){
break
}
}
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
First try using repeat loop
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
View(US.Cities)
View(station)
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
print("fail")
}
}
repeat{
#find city station
station.id <- paste(station$usaf[2],station$wban[2],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
print("fail")
}
}
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
print("fail")
}
}
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
y <- y+1
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
y <- y+1
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break, print("fail")
}
}
y <- 1
repeat{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
y <- y+1
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break, print("fail")
}
}
station.id <- paste(station$usaf[y],station$wban[y],sep="")
lcd(station.id, year=2017)
for(y in 1:nrow(station)){
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break,
}
}
for(y in 1:nrow(station)){
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- lcd(station.id, year=2017)
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
is.error(lcd(station.id, year=2017)
is.error(lcd(station.id, year=2017)
is.error(lcd(station.id, year=2017))
isError(lcd(station.id, year=2017))
try(lcd(station.id, year=2017))
for(i in 1:1){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
#find city station
station.id <- paste(station$usaf[1],station$wban[1],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:1){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
#find city station
station.id <- paste(station$usaf[1],station$wban[1],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
for(y in 1:nrow(station)){
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
for(y in 1:nrow(station)){
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- (lcd(station.id, year=2017))
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
i <- 1
{
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
for(y in 1:nrow(station)){
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- (lcd(station.id, year=2017))
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
typeof(lcd(station.id, year = 2017))
typeof(US.Cities))
typeof(US.Cities)
#----Attempt 3------------------------------------------------------------------
i <- 2
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
View(station)
station.id <- paste(station$usaf[y],station$wban[y],sep="")
station.id <- paste(station$usaf[2],station$wban[2],sep="")
station.weather <- (lcd(station.id, year=2017))
y=1{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
station.weather <- (lcd(station.id, year=2017))
y=2{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- (lcd(station.id, year=2017))
y=2{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
y=2{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- (lcd(station.id, year=2017))
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
y <- 2{
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- (lcd(station.id, year=2017))
y <- 2
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- (lcd(station.id, year=2017))
y <- 1 {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- (lcd(station.id, year=2017))
y <- 1
y <- 1 {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
}
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- (lcd(station.id, year=2017))
}
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- (lcd(station.id, year=2017))
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- (lcd(station.id, year=2017))
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017))
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017), silent = TRUE)
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017), silent = TRUE)
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017), silent = TRUE)
if(typeof(lcd(station.id, year = 2017))==typeof(US.Cities)){
break
}
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017), silent = TRUE)
}
for(y in 1:10) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017), silent = TRUE)
if(typeof(station.weather)==typeof(US.Cities)){
break
}
}
for(y in 1:nrow(station)) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017), silent = TRUE)
if(typeof(station.weather)==typeof(US.Cities)){
break
}
}
for(i in 1:nrow(US.Cities)){
#Look up city
station <- isd_stations_search(lat=US.Cities$lat[i], lon = US.Cities$lng[i])
for(y in 1:nrow(station)) {
#find city station
station.id <- paste(station$usaf[y],station$wban[y],sep="")
#collect data from station
station.weather <- try(lcd(station.id, year=2017), silent = TRUE)
if(typeof(station.weather)==typeof(US.Cities)){
break
}
}
station.weatherdata <- data.frame(date=station.weather$date,
latitude=station.weather$latitude,
longitude=station.weather$longitude,
name=station.weather$name,
temperature= station.weather$hourlydrybulbtemperature,
source= station.weather$source)
#file name
filename <- paste(US.Cities$name[i], "weather.csv",sep=".")
#create new dataset
write.csv(station.weatherdata, paste(path.data, paste(filename), sep=""),
row.names = FALSE)
}
#Still not working
